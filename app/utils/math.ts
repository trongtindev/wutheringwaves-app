// www.trongtin.dev
// What are you looking for here :D

import type { ICharacterDataStats } from '~/interfaces/character';
import type { IWeaponDataStats } from '~/interfaces/weapon';

const character = [
  [10000, 10000, 10000],
  [10842, 10823, 10842],
  [11685, 11647, 11685],
  [12528, 12471, 12528],
  [13370, 13295, 13370],
  [14213, 14119, 14213],
  [15056, 14943, 15056],
  [15898, 15767, 15898],
  [16741, 16591, 16741],
  [17584, 17415, 17584],
  [18426, 18239, 18426],
  [19269, 19063, 19269],
  [20112, 19887, 20112],
  [20955, 20711, 20955],
  [21797, 21535, 21797],
  [22640, 22359, 22640],
  [23483, 23183, 23483],
  [24325, 24007, 24325],
  [25168, 24831, 25168],
  [32677, 32136, 33511],
  [33520, 32960, 34353],
  [34363, 33784, 35196],
  [35205, 34608, 36039],
  [36048, 35432, 36882],
  [36891, 36256, 37724],
  [37734, 37080, 38567],
  [38576, 37904, 39410],
  [39419, 38728, 40252],
  [40262, 39552, 41095],
  [41104, 40376, 41938],
  [41947, 41200, 42780],
  [42790, 42024, 43623],
  [43632, 42848, 44466],
  [44475, 43672, 45308],
  [45318, 44496, 46151],
  [46161, 45320, 46994],
  [47003, 46144, 47837],
  [47846, 46968, 48679],
  [48689, 47792, 49522],
  [56198, 55097, 57865],
  [57041, 55921, 58707],
  [57883, 56745, 59550],
  [58726, 57569, 60393],
  [59569, 58393, 61235],
  [60411, 59217, 62078],
  [61254, 60041, 62921],
  [62097, 60865, 63764],
  [62940, 61689, 64606],
  [63782, 62513, 65449],
  [71292, 69818, 73792],
  [72134, 70642, 74634],
  [72977, 71466, 75477],
  [73820, 72290, 76320],
  [74662, 73114, 77162],
  [75505, 73938, 78005],
  [76348, 74762, 78848],
  [77191, 75586, 79691],
  [78033, 76410, 80533],
  [78876, 77234, 81376],
  [86385, 84540, 89719],
  [87228, 85364, 90561],
  [88071, 86188, 91404],
  [88913, 87012, 92247],
  [89756, 87836, 93089],
  [90599, 88660, 93932],
  [91441, 89483, 94775],
  [92284, 90307, 95617],
  [93127, 91131, 96460],
  [93970, 91955, 97303],
  [101479, 99261, 103146],
  [102322, 100085, 103988],
  [103164, 100909, 104831],
  [104007, 101733, 105674],
  [104850, 102557, 106516],
  [105692, 103381, 107359],
  [106535, 104205, 108202],
  [107378, 105029, 109044],
  [108220, 105853, 109887],
  [109063, 106677, 110730],
  [116573, 113982, 116573],
  [117415, 114806, 117415],
  [118258, 115630, 118258],
  [119101, 116454, 119101],
  [119943, 117278, 119943],
  [120786, 118102, 120786],
  [121629, 118926, 121629],
  [122471, 119750, 122471],
  [123314, 120574, 123314],
  [124157, 121398, 124157],
  [125000, 122222, 125000],
];

const weapon = [
  [
    10000, 10842, 11685, 12528, 13370, 14213, 15056, 15898, 16741, 17584, 18426,
    19269, 20112, 20955, 21797, 22640, 23483, 24325, 25168, 32677, 33520, 34363,
    35205, 36048, 36891, 37734, 38576, 39419, 40262, 41104, 41947, 42790, 43632,
    44475, 45318, 46161, 47003, 47846, 48689, 56198, 57041, 57883, 58726, 59569,
    60411, 61254, 62097, 62940, 63782, 71292, 72134, 72977, 73820, 74662, 75505,
    76348, 77191, 78033, 78876, 86385, 87228, 88071, 88913, 89756, 90599, 91441,
    92284, 93127, 93970, 101479, 102322, 103164, 104007, 104850, 105692, 106535,
    107378, 108220, 109063, 116573, 117415, 118258, 119101, 119943, 120786,
    121629, 122471, 123314, 124157, 125000,
  ],
  [
    10000, 10000, 10000, 10000, 11944, 11944, 11944, 11944, 11944, 13888, 13888,
    13888, 13888, 13888, 15833, 15833, 15833, 15833, 15833, 17777, 17777, 17777,
    17777, 17777, 19722, 19722, 19722, 19722, 19722, 21666, 21666, 21666, 21666,
    21666, 23611, 23611, 23611, 23611, 23611, 25555, 25555, 25555, 25555, 25555,
    27500, 27500, 27500, 27500, 27500, 29444, 29444, 29444, 29444, 29444, 31388,
    31388, 31388, 31388, 31388, 33333, 33333, 33333, 33333, 33333, 35277, 35277,
    35277, 35277, 35277, 37222, 37222, 37222, 37222, 37222, 39166, 39166, 39166,
    39166, 39166, 41111, 41111, 41111, 41111, 41111, 43055, 43055, 43055, 43055,
    43055, 45000,
  ],
];

const echo = [
  10000, 11600, 13200, 14800, 16400, 18000, 19600, 21200, 22800, 24400, 26000,
  27600, 29200, 30800, 32400, 34000, 35600, 37200, 38800, 40400, 42000, 43600,
  45200, 46800, 48400, 50000,
];

export const getCharacterStats = (
  level: number,
  stats: ICharacterDataStats,
) => {
  const [hpRatio, defRatio, atkRatio] = character[level - 1];
  return {
    hp: Math.round(stats.hp * (hpRatio / 1e4)),
    def: Math.round(stats.def * (defRatio / 1e4)),
    atk: Math.round(stats.atk * (atkRatio / 1e4)),
  };
};

export const getWeaponStats = (level: number, stats: IWeaponDataStats) => {
  return {
    hp: stats.hp
      ? parseFloat((stats.hp * (weapon[1][level - 1] / 1e4)).toFixed(2))
      : undefined,
    def: stats.def
      ? parseFloat((stats.def * (weapon[1][level - 1] / 1e4)).toFixed(2))
      : undefined,
    atk: stats.atk
      ? parseFloat((stats.atk * (weapon[1][level - 1] / 1e4)).toFixed(2))
      : undefined,
    atkFlat: parseFloat(
      (stats.atkFlat * (weapon[0][level - 1] / 1e4)).toFixed(2),
    ),
    critRate: stats.critRate
      ? parseFloat((stats.critRate * (weapon[1][level - 1] / 1e4)).toFixed(2))
      : undefined,
    critDMG: stats.critDMG
      ? parseFloat((stats.critDMG * (weapon[1][level - 1] / 1e4)).toFixed(2))
      : undefined,
    energyRegen: stats.energyRegen
      ? parseFloat(
          (stats.energyRegen * (weapon[1][level - 1] / 1e4)).toFixed(2),
        )
      : undefined,
  };
};
